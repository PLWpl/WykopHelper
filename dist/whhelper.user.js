// ==UserScript==
// @name         WykopHelper
// @version      0.72
// @updateURL    https://cdn.jsdelivr.net/gh/plwpl/WykopHelper/dist/whhelper.user.js
// @downloadURL  https://cdn.jsdelivr.net/gh/plwpl/WykopHelper/dist/whhelper.user.js
// @description  Zestaw narzędzi pomocnych na wykopie. Pełna, niezminifikowana wersja kodu dostępna na githubie - PLWpl/WykopHelper
// @author       PLW
// @match        https://www.wykop.pl/*
// @require      https://cdn.jsdelivr.net/npm/sweetalert2@10
// @grant        none
// ==/UserScript==
!function(){"use strict";const e=location.href,t=()=>!!(e.indexOf("wykop.pl")>-1),n=()=>e.indexOf("wykop.pl/link/")>-1||e.indexOf("wykop.pl/mikroblog/")>-1||e.indexOf("wykop.pl/wpis/")>-1||e.indexOf("wykop.pl/moj/")>-1||e.indexOf("wykop.pl/ludzie/")>-1||e.indexOf("wykop.pl/tag/")>-1,o=()=>!!(e.indexOf("wykop.pl/ustawienia/")>-1),a=()=>!!(e.indexOf("wykop.pl/ustawienia/wykophelper")>-1),l=()=>!!(e.indexOf("wykop.pl/link/")>-1),i=()=>!!(e.indexOf("wykop.pl/wpis/")>-1),r=()=>!!(e.indexOf("wykop.pl/ludzie/")>-1),s=(e,t=document)=>t.querySelector(e),E=(e,t=document)=>t.querySelectorAll(e),c="whMarkedUsers",A="whUniqueNicks",T="whSettings",S="whBlacklist",d={COMMON:{CLASSNAME:{WOODLE:"woodle",YT_EMBED:"embed-youtube",BUTTON:"buttonWH"},ID:{COMMENTS_STREAM:"itemsStream"},SELECTOR:{TAGS:".fix-tagline > .tag.affect.create[href]",COMMENT:'[data-type="comment"]',THREAD:'[data-type="entrycomment"]'}},BADGE:{CLASSNAME:{NICK_ELEMENT:"author",NICK_VERIFIED_BADGE:"verified",NICK:"showProfileSummary",VOTES_USERCARD:"usercard",USER_PROFILE:"user-profile",BADGE:"badgeWH",BADGE_UNCLICKABLE:"badgeWH--unclickable",BADGE_CLICKABLE:"badgeWH--clickable",MARK_BUTTON:"buttonWH",MARK_BUTTON_CLICKED:"buttonWH--clicked",MARK_ALL_BUTTON_ELEMENT:"buttonWH--markAllContainer",MARK_ALL_BUTTON:"buttonWH--markAll",MODAL_BUTTON:"modalWH-button",MODAL_BUTTON_REMOVE:"modalWH-button--remove",MODAL_TEXT:"modalWH-text",PROFILE_BLACKLISTED:"whProfile--blacklistedIcon"},ID:{VOTES_CONTAINER:"votesContainer",PROFILE_BLACKLISTED:"whBlacklistedIcon"},SELECTOR:{NICK_ELEMENTS:".grid-main li div.author",NICK:".showProfileSummary > b",NICK_DELETED:".author > .color-1002",REPLY_FORM:".replyForm textarea",COMMENT_FORM:"#commentFormContainer textarea",USER_PROFILE_NICK_ELEMENT:".user-profile h2",USER_PROFILE_NICK:".user-profile h2 span"},DYNAMIC:{DATASET:{USERNAME:e=>`[data-whusername='${e}`}}},SETTINGS:{CLASSNAME:{SETTINGS_NAV:"whSettingsLink",SETTINGS_GENERAL:"settings--general",SETTINGS_BADGE:"settings--badge",SETTINGS_SPECIAL:"settings--special",SETTINGS_BOX:"settings__box",WH_NAV_SETTINGS_LINK:"whSettingsLink",WH_USER_TABLE:"tableWH",WH_USER_TABLE_ROW:"tableWH__row",WH_USER_TABLE_HEAD:"tableWH__head",WH_USER_TABLE_HEADING:"tableWH__heading",WH_USER_TABLE_CONTAINER:"tableWH__container",WH_USER_TABLE_CONTAINER_HIDDEN:"tableWH__container--hidden",WH_USER_TABLE_BODY:"tableWH__body",WH_USER_TABLE_REMOVE_BUTTON:"tableWH__nick-remove",WH_USER_TABLE_BADGE_COLOR:"tableWH__badgeColor",WH_SETTINGS_CROSSED:"settings__crossed"},ID:{SHOW_MARKED_TABLE:"showAllMarked",ALLOW_WIPE_MARKED_LIST:"allowWipeAllMarked",REMOVE_ALL_MARKED:"whsettings__remove-all-marked",SUSPECT_DOMAINS_SETTING:"warnOnSuspectDomain",SUSPECT_DOMAINS_SETTINGS_LINK:"suspectDomainsSettings",SUSPECT_DOMAINS_SETTINGS_TEXTAREA:"suspectDomains",WARN_ON_RELOAD_SETTING:"warnOnReload",WARN_ON_RELOAD_INFO_LINK:"warnOnReloadInfo",IMPORT_BUTTON:"buttonImport",EXPORT_BUTTON:"buttonExport",IMPORT_TEXTAREA:"importArea",EXPORT_TEXTAREA:"exportArea",EXPORT_SETTINGS_BUTTON:"buttonExportSettings",EXPORT_MARKED_BUTTON:"buttonExportMarkedUsers",EXPORT_BLACKLIST_BUTTON:"buttonExportBlacklist",IMPORT_SETTINGS_BUTTON:"buttonImportSettings",IMPORT_MARKED_BUTTON:"buttonImportMarkedUsers",IMPORT_BLACKLIST_BUTTON:"buttonImportBlacklist"},SELECTOR:{LAST_NAV_ELEMENT:"#site .nav > ul > li:last-child",ACTIVE_NAV_ELEMENT:"#site .nav > ul .active",SETTINGS_FORM_ELEMENT:"#site .grid-main .settings",IMPORT_CHECKBOX_NAME:"whImportExportChoice"}},HIGHLIGHT_OP:{CLASSNAME:{HIGHLIGHT_BUTTON:"button--highlightOp",AUTHOR_COMMENTS:"authorComment"},SELECTOR:{OP_THREAD:'[data-type="entry"]'}},EMBED:{CLASSNAME:{EMBED_FILE:"embedFile"}},DOMAIN_CHECKER:{CLASSNAME:{WYKOP_ITEM_INTRO:"bspace",WYKOP_ITEM_ANNOTATION:"annotation"},ID:{},SELECTOR:{THREAD_LINK:".article h2 a"}},MODAL:{CLASSNAME:{LINK:"whModalLink",LIST:"whModal__list",LIST_ITEM:"whModal__list-item",INPUT_LABEL:"whModal__label",INPUT_TEXT:"whModal__inputText",SCROLLABLE_TEXT:"whModal__scrollableText"},ID:{BADGE_TEXT:"whModal_badgeText",BADGE_COLOR:"whModal_badgeColor",BLACKLIST:"whModal_blacklist"}}},L={badge:`\n.${d.BADGE.CLASSNAME.MARK_BUTTON} {\n  display: inline-block;\n  padding: .2rem .2rem;\n  border: 1px solid #9999996e;\n  cursor: pointer;\n  margin-left: .5rem;\n  color: #808080ba;\n  border-radius: .3rem;\n  font-size: .7rem;\n  line-height: .7rem;\n  transition: .3s all;\n}\n.${d.BADGE.CLASSNAME.MARK_BUTTON}:hover {\n  border-color: green;\n}\n.${d.BADGE.CLASSNAME.MARK_BUTTON_CLICKED} {\n  border-color: green;\n  opacity: 0;\n}\n.${d.BADGE.CLASSNAME.BADGE} {\n  color: var(--badgeColor);\n  font-weight: bold;\n  margin-right: .3rem;\n  border: 1px solid currentColor;\n  padding: .1rem .2rem;\n  position: relative;\n  top: .1rem;\n}\n.${d.BADGE.CLASSNAME.BADGE_CLICKABLE} {\n  cursor: pointer;\n}\n.${d.BADGE.CLASSNAME.BADGE_UNCLICKABLE} {\n  cursor: default;\n}\n.${d.BADGE.CLASSNAME.MODAL_BUTTON} {\n  display: block;\n  padding: .4rem .8rem;\n  border: 1px solid #9999996e;\n  cursor: pointer;\n  color: #808080ba;\n  border-radius: .3rem;\n  font-size: 1rem;\n  line-height: 1rem;\n  transition: .3s all;\n}\n.author .${d.BADGE.CLASSNAME.MODAL_TEXT} {\n  position: relative;\n  margin-bottom: .5rem;\n  top: unset;\n  right: unset;\n  left: unset;\n  bottom: unset;\n}\n\n.${d.BADGE.CLASSNAME.MARK_ALL_BUTTON} {\n  top: 0.8rem;\n  position: relative;\n}\n\n.${d.BADGE.CLASSNAME.PROFILE_BLACKLISTED} {\n  cursor: pointer;\n}\n\n.${d.HIGHLIGHT_OP.CLASSNAME.HIGHLIGHT_BUTTON} {\n  position: absolute;\n  top: .1rem;\n  left: 0;\n}\n\n@media screen and (min-width: 722px) {\n  .${d.HIGHLIGHT_OP.CLASSNAME.HIGHLIGHT_BUTTON} {\n    top: 6rem;\n    left: 1rem;\n  }\n}\n\n.${d.DOMAIN_CHECKER.CLASSNAME.MODAL_TEXT_LIST} {\n  margin-top:1rem;list-style-type: circle;font-size:1rem;\n}\n\n.${d.DOMAIN_CHECKER.CLASSNAME.MODAL_TEXT_LIST_ITEM} {\n  text-align:left;margin-left:2rem;margin-bottom:.7rem\n}\n`,settings:`\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE_CONTAINER} {\n  padding: 1rem;\n}\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE_CONTAINER_HIDDEN} {\n  display: none;\n}\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE} {\n  counter-reset: row-num;\n}\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE} .${d.SETTINGS.CLASSNAME.WH_USER_TABLE_ROW} {\n  counter-increment: row-num;\n}\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE} .${d.SETTINGS.CLASSNAME.WH_USER_TABLE_ROW} td:first-child::before {\n  content: counter(row-num) ". ";\n}\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE_HEAD} {\n  font-weight: bold;\n  border-bottom: 2px solid currentColor;\n}\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE_BADGE_COLOR} {\n  display: inline-block;\n  width: 1rem;\n  height: 1rem;\n  background: var(--settingsBadgeColor);\n  border-radius: .5rem;\n}\n.${d.SETTINGS.CLASSNAME.WH_SETTINGS_CROSSED} {\n  opacity: .4;\n  text-decoration: line-through;\n  cursor: not-allowed;\n}\n.${d.SETTINGS.CLASSNAME.WH_USER_TABLE_REMOVE_BUTTON} {\n  cursor: pointer;\n  color: #c0392b;\n}\n.${d.SETTINGS.CLASSNAME.SETTINGS_BOX} {\n  border-bottom: 1px solid #d3d3d329;\n  border-left: 1px solid #d3d3d329;\n  border-right: 1px solid #d3d3d329;\n}\n.${d.MODAL.CLASSNAME.LINK} {\n  color: #862828;\n}\n.${d.MODAL.CLASSNAME.LINK}:hover {\n  color: #4a1313 !important;\n}\n`,modal:`\n.swal2-popup.swal2-modal.swal2-show {\n  background-color: #1b1b1b !important;\n  border: 1px solid #ff5917 !important;\n}\n.swal2-icon.swal2-info {\n  border-color: #542621 !important;\n  color: #c0392b !important;\n}\n\n.swal2-title {\n  color: #a2a2a2 !important;\n}\n\n.swal2-content {\n  color: #888;\n  text-align: unset;\n}\n\n.swal2-styled.swal2-confirm {\n  background-color: #e74c3c6b !important;\n}\n.${d.MODAL.CLASSNAME.LIST} {\n  margin-top: 1rem;\n  list-style-type: square;\n}\n.${d.MODAL.CLASSNAME.LIST_ITEM} {\n  text-align: left;\n  margin-left: 2rem;\n  margin-bottom: .7rem\n}\n\n.${d.MODAL.CLASSNAME.INPUT_LABEL} {\n  text-transform: none;\n  align-items: center;\n  display: inline-flex;\n  margin: .3rem 0;\n}\n\n.${d.MODAL.CLASSNAME.INPUT_TEXT}, .${d.MODAL.CLASSNAME.INPUT_TEXT}:focus {\n  color: #464646 !important;\n}\n\n.${d.MODAL.CLASSNAME.SCROLLABLE_TEXT} {\n  margin-top:.5rem;\n  border:1px solid gray;\n  padding: 1rem;\n  text-align:left;\n  overflow-y: auto;\n  max-height: 15rem;\n}\n`},_={BADGE:{HIDE_MARKED_USERS:!1,DEFAULT_NAME:"Debil",DEFAULT_COLOR:"#ff0000"},GENERAL:{WARN_ON_RELOAD:!1,WARN_ON_SUSPECTED_RUSSIAN_PROPAGANDA:!0,SUSPECT_DOMAINS_LABEL:"Uważaj! Źródło tego znaleziska jest podejrzewane o szerzenie rosyjskiej propagandy.",SUSPECT_DOMAINS:["alternews.pl","alexjones.pl","dziennik-polityczny.com","koniec-swiata.org","magnapolonia.org","narodowcy.net","nczas.com","mysl.pl","ndie.pl","neon24.pl","newsweb.pl","parezja.pl","prostozmostu24.pl","prawdaobiektywna.pl","reporters.pl","sioe.pl","wmeritum.pl","wolnosc24.pl","wolna-polska.pl","wprawo.pl","wsensie.pl","zmianynaziemi.pl","sputniknews.com","rt.com","ruptly.tv","prawica.net","xportal.pl","kresy.pl","bdp.xportal.pl","geopolityka.org","pravda.ru","voiceofrussia.com","ria.ru","ligakobietpolskich.pl","ronik.org.pl","obserwatorpolityczny.pl","mysl-polska.pl"],REMOVE_WOODLE:!1,REMOVE_COMMENTS:"",REMOVE_ALL_COMMENTS:!1,REMOVE_POSTED_VIA_APP:!1}},N=[],O=[],p=[],m=()=>{localStorage.getItem(T)||localStorage.setItem(T,JSON.stringify(_))},I=(e="marked")=>{switch(e){case"settings":return m(),JSON.parse(localStorage.getItem(T));case"unique":return localStorage.getItem(A)||localStorage.setItem(A,JSON.stringify(N)),JSON.parse(localStorage.getItem(A));case"marked":return localStorage.getItem(c)||localStorage.setItem(c,JSON.stringify(O)),JSON.parse(localStorage.getItem(c));case"blacklist":return localStorage.getItem(S)||localStorage.setItem(S,JSON.stringify(p)),JSON.parse(localStorage.getItem(S));default:throw new Error(`Unknown storage type: ${e}. Pick either "unique", "marked", "blacklist" or "settings"`)}},M=I("settings").BADGE.DEFAULT_COLOR,u=`<span class="${d.BADGE.CLASSNAME.MARK_BUTTON}">Oznacz</span>`,C=`<li class="${d.BADGE.CLASSNAME.MARK_ALL_BUTTON_ELEMENT}" style="display:none"><span class="${d.BADGE.CLASSNAME.MARK_BUTTON} ${d.BADGE.CLASSNAME.MARK_ALL_BUTTON}">Oznacz wszystkich poniżej</span></li>`,g=(e,t="debil",n=!0,o=M)=>`<span style="--badgeColor: ${o}" class="${d.BADGE.CLASSNAME.BADGE} ${n?d.BADGE.CLASSNAME.BADGE_CLICKABLE:d.BADGE.CLASSNAME.BADGE_UNCLICKABLE}" data-whusername="${e}">${t}</span>`,D=I("settings");d.MODAL.CLASSNAME.LIST,d.MODAL.CLASSNAME.LIST_ITEM,d.MODAL.CLASSNAME.LINK,d.MODAL.CLASSNAME.LIST_ITEM,d.MODAL.CLASSNAME.LINK,d.MODAL.CLASSNAME.LIST_ITEM,d.MODAL.CLASSNAME.LINK,d.MODAL.CLASSNAME.LIST_ITEM,d.MODAL.CLASSNAME.LINK;const w=`\n  <label>\n    Treść komunikatu ostrzegającego, gdy znalezisko pochodzi z podejrzanego źródła:\n    <input id="suspectDomainsLabel" value="${D.GENERAL.SUSPECT_DOMAINS_LABEL||""}" style="display: block;width: 100%;padding: .3rem 1rem;margin: .5rem 0 1rem;background: #2c2c2c;border: 1px solid #444;" class="">\n  </label>\n  <label>\n    Lista domen uznawanych za podejrzane:\n    <textarea class="" id="suspectDomains" style="display: block; width: 100%; padding: 0.3rem 1rem; margin: 0.5rem 0px 0; height: 150px; max-height: 15rem; overflow: auto; resize: none;">${D.GENERAL.SUSPECT_DOMAINS?D.GENERAL.SUSPECT_DOMAINS.join("\n"):""}</textarea>\n  </label>\n  <small>\n    Same domeny, bez "https://" czy "www."; każda domena w osobnej linijce.\n  </small>\n`,R=`\n  <p>Wybierz, jaki typ danych importujesz:</p>\n  <input type="radio" id="${d.SETTINGS.ID.IMPORT_SETTINGS_BUTTON}" name="${d.SETTINGS.SELECTOR.IMPORT_CHECKBOX_NAME}" value="settings">\n  <label for="${d.SETTINGS.ID.IMPORT_SETTINGS_BUTTON}">Ustawienia</label><br>\n  <input type="radio" id="${d.SETTINGS.ID.IMPORT_MARKED_BUTTON}" name="${d.SETTINGS.SELECTOR.IMPORT_CHECKBOX_NAME}" value="markedUsers">\n  <label for="${d.SETTINGS.ID.IMPORT_MARKED_BUTTON}">Oznaczeni użytkownicy</label><br>\n  <input type="radio" id="${d.SETTINGS.ID.IMPORT_BLACKLIST_BUTTON}" name="${d.SETTINGS.SELECTOR.IMPORT_CHECKBOX_NAME}" value="blacklist">\n  <label for="${d.SETTINGS.ID.IMPORT_BLACKLIST_BUTTON}">Czarna lista</label><br>\n  <label style="padding-top:1rem">\n    Wklej swoje przenoszone dane poniżej:\n    <textarea id="${d.SETTINGS.ID.IMPORT_TEXTAREA}" style="display: block; width: 100%; padding: 0.3rem 1rem; margin: 0.5rem 0px 0; height: 150px; max-height: 15rem; overflow: auto; resize: none;"></textarea>\n  </label>\n`,y=`\n  <p>Wybierz, co chcesz wyeksportować:</p>\n  <button class="button" id="${d.SETTINGS.ID.EXPORT_SETTINGS_BUTTON}">USTAWIENIA</button>\n  <button class="button" id="${d.SETTINGS.ID.EXPORT_MARKED_BUTTON}">OZNACZONYCH UŻYTKOWNIKÓW</button>\n  <button class="button" id="${d.SETTINGS.ID.EXPORT_BLACKLIST_BUTTON}">CZARNĄ LISTĘ</button>\n  <label style="display:block;padding-top:1rem">\n    DANE:\n    <textarea id="${d.SETTINGS.ID.EXPORT_TEXTAREA}" style="display: block; width: 100%; padding: 0.3rem 1rem; margin: 0.5rem 0px 0; height: 150px; max-height: 15rem; overflow: auto; resize: none;"></textarea>\n  </label>\n  <small>Po skopiowaniu edytuj dane TYLKO jeśli wiesz, co robisz - inaczej możesz uszkodzić i stracić wszystkie swoje dane, co wymusi konieczność reinstalacji dodatku "na świeżo".</small>\n`,h=(e,t="")=>{const n=`<style ${t?'id="'+t+'"':""}> ${e} </style>`;document.body.insertAdjacentHTML("afterbegin",n)},b=()=>{const e=I("blacklist");E(d.BADGE.SELECTOR.NICK).forEach((t=>{var n;n=t.innerText,e.includes(n)&&(t.closest(d.COMMON.SELECTOR.COMMENT)?t.closest(d.COMMON.SELECTOR.COMMENT).remove():t.closest(d.COMMON.SELECTOR.THREAD)&&t.closest(d.COMMON.SELECTOR.THREAD).remove())}))},k=e=>{const t=I("blacklist");if(n=e,t.includes(n)){const n=t.filter((t=>t!==e));localStorage.setItem(S,JSON.stringify(n))}var n},{BADGE:B}=d,f=()=>{let e=I("unique"),t=I("marked"),n=I("settings");const o=t=>(e=I("unique"),!!e.includes(t)),a=(a,l,i="",r="",s=n.BADGE.DEFAULT_NAME,E=n.BADGE.DEFAULT_COLOR)=>{o(a)||((t=>{const n=[...e,t];localStorage.setItem(A,JSON.stringify(n))})(a),((e,n,o,a,l,i)=>{t=I("marked");const r=[...t,{nick:e,link:n,label:o,content:a,media:l,color:i}];localStorage.setItem(c,JSON.stringify(r))})(a,l,s,i,r,E))},l=()=>E(B.SELECTOR.NICK_ELEMENTS),i=e=>{if(!(s(B.SELECTOR.NICK,e)&&null!==s(B.SELECTOR.NICK,e)||s(B.SELECTOR.NICK_DELETED,e)&&null!==s(B.SELECTOR.NICK_DELETED,e)))throw new Error(`getNick didn't work for ${e}`);return null!==s(B.SELECTOR.NICK,e)?s(B.SELECTOR.NICK,e).innerText:null!==s(B.SELECTOR.NICK_DELETED,e)?s(B.SELECTOR.NICK_DELETED,e).innerText:void 0},T=e=>!s(`.${B.CLASSNAME.BADGE}`,e),_=()=>{try{l().forEach((e=>{const t=i(e);if(o(t)&&T(e)){const o=p(t)?p(t):null,a=o?o.label:n.BADGE.DEFAULT_NAME,l=o&&o.color?o.color:n.BADGE.DEFAULT_COLOR;e.insertAdjacentHTML("afterbegin",g(t,a,!0,l))}else(e=>!!s(`.${B.CLASSNAME.MARK_BUTTON}`,e))(e)||e.insertAdjacentHTML("beforeend",u)}))}catch(e){}},N=e=>{_();l().forEach((t=>{const n=i(t);if(o(n)&&T(t)&&t.insertAdjacentHTML("afterbegin",g(n)),e&&o(n)&&!T(t)){s(`.${B.CLASSNAME.BADGE}`,t).remove();const e=p(n);t.insertAdjacentHTML("afterbegin",g(n,e.label,!0,e.color))}o(n)&&s(`.${B.CLASSNAME.MARK_BUTTON}`,t)&&!s(`.${B.CLASSNAME.MARK_BUTTON_CLICKED}`,t)&&s(`.${B.CLASSNAME.MARK_BUTTON}`,t).remove(),o(n)||T(t)||s(`.${B.CLASSNAME.BADGE}`,t).remove()})),r()&&setTimeout((()=>{location.reload()}),200)},O=(e,t,n)=>{const o=I("marked");for(let a of o.entries())if(a[1].nick===e){a[1][t]=n;const e=o.filter((e=>null!=e));localStorage.setItem(c,JSON.stringify(e))}N(!0)},p=e=>{if(!e)throw new Error("getNickData requires nick to be provided.");const t=I("marked");for(let n=0;n<t.length;n++){if(t[n].nick===e)return{link:t[n].link,nick:t[n].nick,label:t[n].label,color:t[n].color,content:t[n].content,media:t[n].media};void 0!==t[n]&&t[n]}},m=n=>{const o=s(n).dataset.whusername,a=p(o),l=I("blacklist"),i=((e,t)=>{return{title:`${e.nick}`,content:`\n    <p style="text-align:left">Przyczyna oznaczenia</strong>:</p>\n    <div class="${d.MODAL.CLASSNAME.SCROLLABLE_TEXT}"><p>${e.content}</p>\n    ${e.media?(n=e.media,`<p style="margin-top:5px;"><a href="${n}" target="_blank">Link do osadzonej treści multimedialnej (obrazek lub film)</a></p>`):""}</div>\n    <p style="margin-top:1rem;text-align:right"><a href="${e.link}">Link do komentarza lub znaleziska</a></p>\n    <div style="display:flex;flex-direction:column;">\n      <label class="${d.MODAL.CLASSNAME.INPUT_LABEL}">Treść odznaki: <input autocomplete="off" data-label="${e.label}" value="${e.label}" class="${d.MODAL.CLASSNAME.INPUT_TEXT}" id="${d.MODAL.ID.BADGE_TEXT}" style="margin-left: 1rem;"></label>\n      <label class="${d.MODAL.CLASSNAME.INPUT_LABEL}">Kolor odznaki: <input type="color" data-color="${e.color?e.color:D.BADGE.DEFAULT_COLOR}" id="${d.MODAL.ID.BADGE_COLOR}" value="${e.color?e.color:D.BADGE.DEFAULT_COLOR}" style="margin-left: 1rem;height:2rem;border:0;padding:0;width:2rem;"></label>\n      <label class="${d.MODAL.CLASSNAME.INPUT_LABEL}">Czarna lista: <input data-blocked="${t}" type="checkbox" id="${d.MODAL.ID.BLACKLIST}" style="margin-left: 2rem;" ${t?"checked":""}></label>\n    </div>\n    `,button:"Usuń oznaczenie",buttonClose:"Zapisz"};var n})(a,l.includes(o));Swal.fire({title:i.title,html:i.content,icon:"info",allowEnterKey:!1,showCancelButton:!1,showCloseButton:!0,showDenyButton:!0,confirmButtonText:i.button,denyButtonText:i.buttonClose,denyButtonColor:"#0a8658",width:"80%"}).then((n=>{if(n.isConfirmed)(n=>{for(let[e,o]of t.entries())if(o.nick===n){delete t[e];const n=t.filter((e=>null!=e));localStorage.setItem(c,JSON.stringify(n))}const o=e.filter((e=>e!==n));localStorage.setItem(A,JSON.stringify(o)),k(n),setTimeout((()=>{N()}),780)})(o),Swal.fire("Usunięto!","Użytkownik nie będzie już więcej oznaczany.","info").then((()=>{r()&&location.reload()}));else if(n.isDenied){const e=s(`#${d.MODAL.ID.BADGE_TEXT}`).dataset.label,t=s(`#${d.MODAL.ID.BADGE_TEXT}`).value,n=s(`#${d.MODAL.ID.BADGE_COLOR}`).dataset.color,a=s(`#${d.MODAL.ID.BADGE_COLOR}`).value,i=s(`#${d.MODAL.ID.BLACKLIST}`).dataset.blocked,r=s(`#${d.MODAL.ID.BLACKLIST}`).checked;if(t!==e&&O(o,"label",t),a!==n&&O(o,"color",a),i!==r){let e;r?(l.push(o),localStorage.setItem(S,JSON.stringify(l))):r||(e=l.filter((e=>e!==o)),localStorage.setItem(S,JSON.stringify(e)))}N(!0)}}))};h(L.badge),h(L.modal),_(),(()=>{if(document.getElementById(B.ID.VOTES_CONTAINER)){const e=document.getElementById(B.ID.VOTES_CONTAINER).closest(".rbl-block").querySelector(".nav ul + ul");e&&e.insertAdjacentHTML("beforeend",C)}})(),document.getElementById("itemsStream").addEventListener("click",(e=>{const t=e.target;if(t.classList.contains(B.CLASSNAME.MARK_BUTTON)&&(e=>{const t=i(e.target.closest(`.${B.CLASSNAME.NICK_ELEMENT}`)),n=e.target.closest(`.${B.CLASSNAME.NICK_ELEMENT}`).querySelector(".verified")?e.target.closest(`.${B.CLASSNAME.NICK_ELEMENT}`).querySelector(`.${B.CLASSNAME.NICK_VERIFIED_BADGE} + a`).href:e.target.closest(`.${B.CLASSNAME.NICK_ELEMENT}`).querySelector("a + a").href,o=e.target.closest(".wblock").querySelector(".text p").innerHTML,l=e.target.closest(".wblock").querySelector(".text .media-content a")?e.target.closest(".wblock").querySelector(".text .media-content a").href:null;e.target.classList.add(B.CLASSNAME.MARK_BUTTON_CLICKED),e.target.innerText="✔",a(t,n,o,l),setTimeout((()=>{e.target.remove()}),700),setTimeout((()=>{N()}),780)})(e),t.classList.contains("affect")&&t.closest(".more")&&setTimeout((()=>{_()}),500),t.classList.contains(B.CLASSNAME.BADGE)){const e=t.dataset.whusername;m(B.DYNAMIC.DATASET.USERNAME(e))}})),r()&&s(`.${B.CLASSNAME.USER_PROFILE}`).addEventListener("click",(e=>{const t=e.target;if(t.classList.contains(B.CLASSNAME.BADGE)){const e=t.dataset.whusername;m(B.DYNAMIC.DATASET.USERNAME(e))}})),document.getElementById(B.ID.VOTES_CONTAINER)&&document.getElementById(B.ID.VOTES_CONTAINER).closest(".rbl-block").querySelector(".nav").addEventListener("click",(e=>{const t=e.target;t.classList.contains(B.CLASSNAME.MARK_ALL_BUTTON)&&((()=>{const e=window.location.href,t=E(`#${B.ID.VOTES_CONTAINER} .${B.CLASSNAME.VOTES_USERCARD}`);let n;s("#voters").closest("li").classList.contains("active")?n="wykop":s("#votersBury").closest("li").classList.contains("active")&&(n="zakop"),t.forEach((t=>{const o=s("a",t).title;a(o,e,(e=>`Użytkownik ${e}ał podlinkowane znalezisko.`)(n))})),setTimeout((()=>{N()}),780)})(),s(`.${B.CLASSNAME.MARK_ALL_BUTTON}`).innerText="Zrobione :)",setTimeout((()=>{s(`.${B.CLASSNAME.MARK_ALL_BUTTON_ELEMENT}`).style.display="none",s(`.${B.CLASSNAME.MARK_ALL_BUTTON}`).innerText="Oznacz wszystkich poniżej"}),500)),(t.closest("#voters")||t.closest("#votersBury"))&&(s(`.${B.CLASSNAME.MARK_ALL_BUTTON_ELEMENT}`).style.display="block")}))},{BADGE:z}=d;let v=I("unique");let G=I("settings");const U=e=>{if(!e)throw new Error("getNickData requires nick to be provided.");const t=I("marked");for(let n=0;n<t.length;n++){if(t[n].nick===e)return{link:t[n].link,nick:t[n].nick,label:t[n].label,color:t[n].color,content:t[n].content,media:t[n].media};void 0!==t[n]&&t[n]}},{BADGE:H}=d,$=()=>{const e=s(H.SELECTOR.USER_PROFILE_NICK_ELEMENT),t=s(H.SELECTOR.USER_PROFILE_NICK).textContent,n=U(t)?U(t):null,o=n?n.label:G.BADGE.DEFAULT_NAME,a=n?n.color:G.BADGE.DEFAULT_COLOR;var l;(e=>(v=I("unique"),!!v.includes(e)))(t)&&(l=e,!s(`.${z.CLASSNAME.BADGE}`,l))&&e.insertAdjacentHTML("afterbegin",g(t,o,!0,a))},x=I("settings"),P=()=>{const e=()=>{if(!s(d.DOMAIN_CHECKER.SELECTOR.THREAD_LINK).href)return;const e=(x.GENERAL.SUSPECT_DOMAINS||[]).map((e=>["https://"+e,"https://www."+e,"http://"+e,"http://www."+e])).flat(),t=s(d.DOMAIN_CHECKER.SELECTOR.THREAD_LINK).href,n=new URL(t),o=n.protocol+"//"+n.hostname,a=((e,t="alert")=>`\n  <div class="${d.DOMAIN_CHECKER.CLASSNAME.WYKOP_ITEM_ANNOTATION} type-${t} space clearfix">\n\t\t<p>${e}</p>\n\t</div>\n`)(x.GENERAL.SUSPECT_DOMAINS_LABEL);e.includes(o)&&s(`.${d.DOMAIN_CHECKER.CLASSNAME.WYKOP_ITEM_INTRO}`).insertAdjacentHTML("beforebegin",a)};x.GENERAL.WARN_ON_SUSPECTED_RUSSIAN_PROPAGANDA&&e()},K=()=>{I("settings").BADGE.HIDE_MARKED_USERS&&E(`.${d.BADGE.CLASSNAME.BADGE}`).forEach((e=>{e.closest(".wblock").innerHTML='<p style="opacity:0.3">Tu był komentarz użytkownika, którego oznaczyłeś z pomocą WykopHelpera. Jeśli chcesz widzieć takie komentarze, edytuj swoje ustawienia w localStorage (bo zapewne tam aktywowałeś to ustawienie, czyż nie? :) ).</p>'}))},{SETTINGS:{CLASSNAME:W,ID:j}}=d,X={settingsMarkup:`\n<fieldset>\n  <small>\n    <a target="_blank" href="https://plwpl.github.io/WykopHelper">ᴅᴏᴄs</a> ‖ <a target="_blank" href="https://plwpl.github.io/WykopHelper/#6-changelog">ᴄʜᴀɴɢᴇʟᴏɢ</a>\n  <small>\n  <h4>WykopHelper - Ustawienia</h4>\n\x3c!-- GENERAL --\x3e\n  <div class="space ${W.SETTINGS_BOX} ${W.SETTINGS_GENERAL}">\n    <div class="row">\n      <input\n        class="checkbox"\n        type="checkbox"\n        category="GENERAL"\n        name="WARN_ON_RELOAD"\n        id="${j.WARN_ON_RELOAD_SETTING}"\n      />\n      <label class="inline" for="${j.WARN_ON_RELOAD_SETTING}">Ostrzegaj przy próbie zamknięcia/przeładowania strony gdy wykryto pisanie komentarza </label><svg  style="width: 1.5rem; stroke: currentColor; cursor: pointer;border: 1px solid currentColor;border-radius: 5px;padding: .1rem;" id="${j.WARN_ON_RELOAD_INFO_LINK}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 180 180"><path stroke-width="16" d="M60 67c0-13 1-19 8-26 7-9 18-10 28-8s22 12 22 26-11 19-15 22c-7 2-10 6-11 11v20m0 12v16"/></svg>\n    </div>\n    <div class="row">\n      <input\n        class="checkbox"\n        type="checkbox"\n        category="GENERAL"\n        name="WARN_ON_SUSPECTED_RUSSIAN_PROPAGANDA"\n        id="${j.SUSPECT_DOMAINS_SETTING}"\n      />\n      <label class="inline" for="${j.SUSPECT_DOMAINS_SETTING}">Oznaczaj znaleziska z podejrzanych źródeł </label><svg id="${j.SUSPECT_DOMAINS_SETTINGS_LINK}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" style="width: 1.5rem;fill: currentColor;cursor: pointer;border: 1px solid currentColor;border-radius: 5px;padding: .25rem;"><path d="M14 0h4l1 6 1.707.707L26 3.293 28.707 6l-3.414 5.293L26 13l6 1v4l-6 1-.707 1.707L28.707 26 26 28.707l-5.293-3.414L19 26l-1 6h-4l-1-6-1.707-.707L6 28.707 3.293 26l3.414-5.293L6 19l-6-1v-4l6-1 .707-1.707L3.293 6 6 3.293l5.293 3.414L13 6l1-6zm2 10a6 6 0 000 12 6 6 0 000-12"></path></svg>\n    </div>\n    <div class="row">\n      <input\n        class="checkbox"\n        type="checkbox"\n        category="GENERAL"\n        name="REMOVE_WOODLE"\n        id="removeWoodle"\n      />\n      <label class="inline" for="removeWoodle">Usuwaj woodle (okolicznościowy obrazek na belce)</label>\n    </div>\n    <div class="row">\n      <input\n        class="checkbox"\n        type="checkbox"\n        category="GENERAL"\n        name="REMOVE_POSTED_VIA_APP"\n        id="removePostedViaApp"\n      />\n      <label class="inline" for="removePostedViaApp">Usuwaj info o tym, że dany komentarz został wysłany przez aplikację (np. "via Android")</label>\n    </div>\n    <div class="row">\n      <input\n        class="checkbox"\n        type="checkbox"\n        category="GENERAL"\n        name="REMOVE_ALL_COMMENTS"\n        id="removeAllComments"\n      />\n      <label class="inline" for="removeAllComments">Usuń komentarze we <strong>wszystkich</strong> znaleziskach</label>\n    </div>\n    <div class="row space">\n      <label class="inline" for="removeByTag" style="margin-left:0;display:block;">Usuń komentarze tylko w znaleziskach z następującymi tagami:</label>\n      <input \n        value="" \n        type="text" \n        placeholder="Tagi oddzielaj przecinkiem, nie używaj hasha #" \n        category="GENERAL" \n        name="REMOVE_BY_TAG" \n        id="removeByTag"\n      />\n    </div>\n  </div>\n\x3c!--  BADGE --\x3e\n  <div class="space ${W.SETTINGS_BOX} ${W.SETTINGS_BADGE}">\n    <div class="row space" style="display:flex;align-items:center;">\n      <input \n        type="color" \n        id="badgeDefaultColor" \n        name="DEFAULT_COLOR" \n        category="BADGE" \n        style="height:2rem; border:0; padding:0; width:2rem;" \n        value="#ff0000"\n      />\n      <label class="inline" for="badgeDefaultColor">Domyślny kolor odznaki</label> \n    </div>\n    <div class="row space">\n      <label class="inline" for="badgeDefaultValue" style="margin-left:0;display:block;">Domyślny tekst odznaki:</label>\n      <input \n        placeholder="Domyślny tekst odznaki" \n        id="badgeDefaultValue" \n        category="BADGE" \n        value=""\n        name="DEFAULT_NAME" \n        type="text"\n      />\n    </div>\n  </div>\n\x3c!--  Export and import --\x3e\n  <div class="space ${W.SETTINGS_BOX} ${W.SETTINGS_IMPORT_EXPORT}">\n    <div class="row" style="display:flex;align-items:center;">\n      <small>Jeśli chcesz, możesz eksportować swoje ustawienia bądź bazę oznaczonych użytkowników, albo też ją zaimportować na innym komputerze. O proces przenosin musisz zadbać sam/a - możesz do tego wykorzystać na przykład plik tekstowy "notatnika".</small>\n      <button class="button" style="margin: 0 .5rem" id="buttonImport">IMPORTUJ</button>\n      <button class="button" style="margin: 0 .5rem" id="buttonExport">EKSPORTUJ</button>\n    </div>\n  </div>\n\x3c!-- SPECIAL --\x3e\n  <div class="space ${W.SETTINGS_BOX} ${W.SETTINGS_SPECIAL}">\n    <div class="row">\n      <small>Jeśli chcesz wyczyścić listę oznaczonych wcześniej użytkowników, możesz to zrobić poniżej. W związku z tym, że jest to akcja nieodwracalna, musisz najpierw potwierdzić, że na pewno taki jest Twój cel. Uwaga - po kliknięciu przycisku akcja wykonywana jest natychmiast, bez dodatkowych potwierdzeń!</small>\n    </div>\n    <div class="row">\n      <input\n        class="checkbox"\n        type="checkbox"\n        category="SPECIAL"\n        name="ALLOW_WIPE_MARKED_LIST"\n        id="allowWipeAllMarked"\n      />\n      <label class="inline" for="allowWipeAllMarked">Zaznacz by odblokować możliwość wyczyszczenia listy</label>\n    </div>\n    <div class="row space">\n      <button style="opacity:0.4" id="whsettings__remove-all-marked" disabled>Wyczyść</button>\n    </div>\n    <div class="row space">\n      <button class="button" id="showAllMarked">Pokaż wszystkich oznaczonych użytkowników</button>\n    </div>\n  </div>\n</fieldset>\n`,settingsUserTable:`\n<div class="${W.WH_USER_TABLE_CONTAINER} ${W.WH_USER_TABLE_CONTAINER_HIDDEN}">\n  <h4 class="${W.WH_USER_TABLE_HEADING}">WykopHelper - Lista oznaczonych użytkowników</h4>\n  <table class="${W.WH_USER_TABLE}">\n    <thead class="${W.WH_USER_TABLE_HEAD}">\n      <tr>\n        <td>no.</td>\n        <td>Nick</td>\n        <td>Nazwa</td>\n        <td>Kolor</td>\n        <td>Link</td>\n        <td>Usuń</td>\n      </tr>\n    </thead>\n    <tbody class="${W.WH_USER_TABLE_BODY}">\n    </tbody>\n  </table> \n</div>\n`,settingsNav:`<li class="${W.SETTINGS_NAV}"><a href="https://www.wykop.pl/ustawienia/wykophelper/"><span><strong>WykopHelper</strong> &#10024;</span></a></li>`,settingsUserTableRow:(e,t,n,o)=>`\n<tr class="${W.WH_USER_TABLE_ROW}">\n  <td></td>\n  <td><a href="https://www.wykop.pl/ludzie/${e}" target="_blank">${e}</a></td>\n  <td>${t}</td>\n  <td style="text-align: center"><span style="--settingsBadgeColor: ${o}" class="${W.WH_USER_TABLE_BADGE_COLOR}"></span></td>\n  <td><a href="${n}" target="_blank">&#128279</a></td>\n  <td><span class="${W.WH_USER_TABLE_REMOVE_BUTTON}" data-whuserremove="${e}">&#x02717;</a></td>\n</tr>\n`,textContent:{SHOW_ALL_MARKED:"Pokaż wszystkich oznaczonych użytkowników",HIDE_TABLE:"Schowaj tabelę",RUSSIAN_PROPAGANDA_MODAL_TITLE:"Skąd lista stron z propagandą?",WARN_ON_RELOAD_MODAL_TITLE:"Ostrożnie z tym ficzerem... :("}},{SETTINGS:V}=d,F=()=>{let e=I("settings");const t=I(),n=I("unique"),o=I("blacklist"),a=s(V.SELECTOR.SETTINGS_FORM_ELEMENT),l=()=>{Swal.fire({html:R,icon:"info",iconHtml:'<svg style="fill:currentColor;width:2rem;height: auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h8v-4h-8V16h28v20h-8v4h8c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM24 20l-8 8h6v12h4V28h6l-8-8z"/></svg>',iconColor:"#fff",showCancelButton:!0,showCloseButton:!0,confirmButtonColor:"#0a8658",confirmButtonText:"Zapisz nowe",showLoaderOnConfirm:!0,cancelButtonText:"Anuluj",width:"80%"}).then((e=>{if(e.isConfirmed){const e=s(`#${V.ID.IMPORT_TEXTAREA}`).value,t=s(`input[type="radio"][name="${V.SELECTOR.IMPORT_CHECKBOX_NAME}"]:checked`).value;t&&"settings"===t?localStorage.setItem(T,e):t&&"markedUsers"===t?(localStorage.setItem(c,e),localStorage.setItem(A,(e=>{const t=JSON.parse(e).map((e=>e.nick));return JSON.stringify(t)})(e))):t&&"blacklist"===t?localStorage.setItem(S,e):alert("Nie wybrano typu danych: czy importujesz ustawienia, czy oznaczonych użytkowników?")}}))},i=()=>{s(V.SELECTOR.ACTIVE_NAV_ELEMENT).classList.remove("active"),s(`.${V.CLASSNAME.WH_NAV_SETTINGS_LINK}`).classList.add("active"),a.innerHTML="",a.innerHTML=X.settingsMarkup,a.removeAttribute("method"),a.removeAttribute("action"),a.insertAdjacentHTML("afterend",X.settingsUserTable),(()=>{const n=s(`.${V.CLASSNAME.WH_USER_TABLE_BODY}`);t.forEach((t=>{n.insertAdjacentHTML("beforeend",X.settingsUserTableRow(t.nick,t.label||e.BADGE.DEFAULT_NAME,t.link,t.color||e.BADGE.DEFAULT_COLOR))}))})(),E("input").forEach((t=>{const n=t.getAttribute("category");t.id!==V.ID.ALLOW_WIPE_MARKED_LIST&&"checkbox"===t.type?t.checked=e[n][t.name]:"text"===t.type&&"nsQ"!==t.name?t.value=e[n][t.name]||"":"color"===t.type&&(t.value=e[n][t.name])}))},r=()=>{a.addEventListener("change",(t=>{const n=t.target.getAttribute("category"),o=t.target.name;"checkbox"===t.target.type&&t.target.id!==V.ID.ALLOW_WIPE_MARKED_LIST&&(e[n][o]=!e[n][o],localStorage.setItem(T,JSON.stringify(e))),"color"===t.target.type&&(e[n][o]=t.target.value,localStorage.setItem(T,JSON.stringify(e)))}),{passive:!0}),a.addEventListener("click",(t=>{t.target.id===V.ID.SHOW_MARKED_TABLE&&(t.preventDefault(),s(`.${V.CLASSNAME.WH_USER_TABLE_CONTAINER}`).classList.toggle(`${V.CLASSNAME.WH_USER_TABLE_CONTAINER}--hidden`),s(`.${V.CLASSNAME.WH_USER_TABLE_CONTAINER}--hidden`)?document.getElementById(V.ID.SHOW_MARKED_TABLE).textContent=X.textContent.SHOW_ALL_MARKED:document.getElementById(V.ID.SHOW_MARKED_TABLE).textContent=X.textContent.HIDE_TABLE),t.target.id===V.ID.ALLOW_WIPE_MARKED_LIST&&(t.target.disabled=!0,document.getElementById(V.ID.REMOVE_ALL_MARKED).disabled=!1,document.getElementById(V.ID.REMOVE_ALL_MARKED).style.opacity=1),t.target.id===V.ID.REMOVE_ALL_MARKED&&(t.preventDefault(),localStorage.setItem(A,"[]"),localStorage.setItem(c,"[]"),location.reload()),t.target.id===V.ID.SUSPECT_DOMAINS_SETTINGS_LINK&&Swal.fire({html:w,icon:"info",iconHtml:'<svg style="fill:currentColor;width:2rem;height: auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M14 0h4l1 6 1.707.707L26 3.293 28.707 6l-3.414 5.293L26 13l6 1v4l-6 1-.707 1.707L28.707 26 26 28.707l-5.293-3.414L19 26l-1 6h-4l-1-6-1.707-.707L6 28.707 3.293 26l3.414-5.293L6 19l-6-1v-4l6-1 .707-1.707L3.293 6 6 3.293l5.293 3.414L13 6l1-6zm2 10a6 6 0 000 12 6 6 0 000-12"/></svg>',iconColor:"#fff",showCancelButton:!0,showCloseButton:!0,confirmButtonColor:"#0a8658",confirmButtonText:"Zapisz",cancelButtonText:"Anuluj",width:"80%",willOpen:t=>{s("#suspectDomainsLabel",t).value=e.GENERAL.SUSPECT_DOMAINS_LABEL,s("#suspectDomains",t).value=e.GENERAL.SUSPECT_DOMAINS.join("\n")}}).then((t=>{if(t.isConfirmed){let t=s(`#${V.ID.SUSPECT_DOMAINS_SETTINGS_TEXTAREA}`).value;t.replace("https://","").replace("http://","").replace("www.","").replace(" ","");const n=t.split("\n");e.GENERAL.SUSPECT_DOMAINS=n;const o=s("#suspectDomainsLabel").value;e.GENERAL.SUSPECT_DOMAINS_LABEL=o,localStorage.setItem(T,JSON.stringify(e))}})),t.target.id===V.ID.WARN_ON_RELOAD_INFO_LINK&&Swal.fire({title:X.textContent.WARN_ON_RELOAD_MODAL_TITLE,html:"\n  <p>Ten ficzer jest eksperymentalny. Obecnie prawdopodobnie udało mi się wyeliminować błędy, które sprawiały, że w przeszłości (nie)działał jak chciał, ale mimo wszystko - proponuję najpierw przetestować, czy działa jak trzeba również u Ciebie, zanim zaczniesz na nim polegać dla ochrony przed utratą treści :) \n",icon:"info",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"OK",width:"80%"}),t.target.id===V.ID.IMPORT_BUTTON&&(t.preventDefault(),l()),t.target.id===V.ID.EXPORT_BUTTON&&(t.preventDefault(),Swal.fire({html:y,icon:"info",iconHtml:'<svg style="fill:currentColor;width:2rem;height: auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M34 6H10c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V14l-8-8zM24 38c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm6-20H10v-8h20v8z"/></svg>',iconColor:"#fff",showCloseButton:!0,confirmButtonColor:"#0a8658",confirmButtonText:"SKOPIUJ DO SCHOWKA",width:"80%"}).then((e=>{e.isConfirmed&&(s(`#${V.ID.EXPORT_TEXTAREA}`).select(),document.execCommand("copy"))})))}),{passive:!1}),document.addEventListener("click",(n=>{n.target.id===V.ID.EXPORT_SETTINGS_BUTTON&&(s(`#${V.ID.EXPORT_TEXTAREA}`).innerText="",s(`#${V.ID.EXPORT_TEXTAREA}`).innerText=JSON.stringify(e)),n.target.id===V.ID.EXPORT_MARKED_BUTTON&&(s(`#${V.ID.EXPORT_TEXTAREA}`).innerText="",s(`#${V.ID.EXPORT_TEXTAREA}`).innerText=JSON.stringify(t)),n.target.id===V.ID.EXPORT_BLACKLIST_BUTTON&&(s(`#${V.ID.EXPORT_TEXTAREA}`).innerText="",s(`#${V.ID.EXPORT_TEXTAREA}`).innerText=JSON.stringify(o))}),{passive:!0}),a.addEventListener("keyup",(t=>{const n=t.target.getAttribute("category"),o=t.target.name;"text"===t.target.type&&(e[n][o]=t.target.value,localStorage.setItem(T,JSON.stringify(e)))}),{passive:!0})};h(L.settings),h(L.modal),i(),r(),s(`.${d.SETTINGS.CLASSNAME.WH_USER_TABLE}`).addEventListener("click",(e=>{const o=e.target;o.classList.contains(`${d.SETTINGS.CLASSNAME.WH_USER_TABLE_REMOVE_BUTTON}`)&&((e=>{for(let[n,o]of t.entries())if(o.nick===e){delete t[n];const e=t.filter((e=>null!=e));localStorage.setItem(c,JSON.stringify(e))}const o=n.filter((t=>t!==e));localStorage.setItem(A,JSON.stringify(o))})(o.dataset.whuserremove),o.closest("tr").remove())}))},J="0.72",q="WykopHelper zainstalowany!",Y='Miłego używania dodatku! Jeśli masz jakiekolwiek problemy, pytania lub sugestie, zgłoś je <a href="https://github.com/PLWpl/WykopHelper/issues" target="_blank">tutaj.</a>',Z="Super!",Q={title:"WykopHelper zaktualizowany!",content:`\nDodatek WykopHelper został właśnie zaktualizowany do wersji <strong>0.72</strong>. Wprowadzone zmiany to: <br>\n<ul class="${d.MODAL.CLASSNAME.LIST}">\n  ${['Dodana opcja "naprawiania" linków do YT; po jej włączeniu w ustawieniach, osadzone filmy z YT nie będą już linkować do jakiejś francuskiej strony z wyrażaniem zgody na kto-wie-co, tylko bezpośrednio do filmu.',"Poprawki w funkcjonalności usuwania informacji o postowaniu przez aplikację;","Usunięty błąd uniemożliwiający korzystanie z funkcjonalności oznaczania autora wątku na mikroblogu;","Usunięty błąd który powodował, że jeśli X został dodany na czarną listę, a potem zostało usunięte odznaczenie, to zostawał na czarnej liście na zawsze."].map((e=>{return t=e,`<li class="${d.MODAL.CLASSNAME.LIST_ITEM}">${t}</li>`;var t})).join("")}\n</ul>\n`,button:"Okej!"},ee=`<span class="${d.COMMON.CLASSNAME.BUTTON} ${d.HIGHLIGHT_OP.CLASSNAME.HIGHLIGHT_BUTTON}">Pokaż OPa</span>`,{BADGE:te}=d,ne=()=>{I("settings").GENERAL.WARN_ON_RELOAD&&window.addEventListener("beforeunload",(e=>{(()=>{const e=s(te.SELECTOR.REPLY_FORM),t=s(te.SELECTOR.COMMENT_FORM);let n=!1,o=!1;return e&&e.value.length>0&&(o=e&&e.value.split(" ").length>5),t&&t.value.length>0&&(n=t&&t.value.split(" ").length>5),!o&&!n})()||(e.preventDefault(),e.returnValue="Wygląda na to, że jesteś w trakcie pisania komentarza. Czy na pewno chcesz opuścić stronę?")}))},oe=()=>{I("settings").GENERAL.REMOVE_WOODLE&&(s(`.${d.COMMON.CLASSNAME.WOODLE}`).style.display="none")},ae=()=>{const e=I("settings").GENERAL.REMOVE_BY_TAG,t=e?e.replace(" ","").replace("#","").split(","):"";let n;window.dataLayer2[1]?(n=Object.assign({},window.dataLayer2[1]),delete n.action,delete n.event,delete n.logged,delete n.method):(n=[],document.querySelectorAll(d.COMMON.SELECTOR.TAGS).forEach((e=>{n.push(e.textContent.replace("#",""))})));const o=e=>t.includes(e),a=()=>{Object.values(n).some(o)&&s(`#${d.COMMON.ID.COMMENTS_STREAM}`)&&s(`#${d.COMMON.ID.COMMENTS_STREAM}`).remove()};t.length>0&&a()},le=()=>{I("settings").GENERAL.REMOVE_ALL_COMMENTS&&s(`#${d.COMMON.ID.COMMENTS_STREAM}`)&&s(`#${d.COMMON.ID.COMMENTS_STREAM}`).remove()},ie=()=>{I("settings").GENERAL.REMOVE_POSTED_VIA_APP&&E(`.${d.BADGE.CLASSNAME.NICK_ELEMENT}`).forEach((e=>{const t=e.querySelector("a + small");t&&(t.style.display="none")}))};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},h(L.modal,"whInitModalStyle"),localStorage.getItem("WHupdate")&&localStorage.getItem("WHupdate")<J?(Swal.fire({title:Q.title,html:Q.content,showCloseButton:!0,icon:"info",iconHtml:'<svg xmlns="http://www.w3.org/2000/svg" style="fill:currentColor;width:2rem;height: auto" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48"><defs><path d="M0 0h48v48H0V0z" id="a"/></defs><clipPath id="b"><use overflow="visible" xlink:href="#a"/></clipPath><path clip-path="url(#b)" d="M40 8H8c-2.21 0-3.98 1.79-3.98 4L4 36c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM17 30h-2.4l-5.1-7v7H7V18h2.5l5 7v-7H17v12zm10-9.49h-5v2.24h5v2.51h-5v2.23h5V30h-8V18h8v2.51zM41 28c0 1.1-.9 2-2 2h-8c-1.1 0-2-.9-2-2V18h2.5v9.01h2.25v-7.02h2.5v7.02h2.25V18H41v10z"/></svg>',width:"80%",confirmButtonText:Q.button}),localStorage.setItem("WHupdate",J),(()=>{if(!localStorage.getItem(S)){const e=[];localStorage.setItem(S,JSON.stringify(e))}})()):localStorage.getItem("WHupdate")||(Swal.fire({title:q,html:Y,icon:"warning",iconHtml:'<svg xmlns="http://www.w3.org/2000/svg" style="fill:currentColor;width:2rem;height: auto" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M2 42h8V18H2v24zm44-22c0-2.21-1.79-4-4-4H29.37l1.91-9.14c.04-.2.07-.41.07-.63 0-.83-.34-1.58-.88-2.12L28.34 2 15.17 15.17C14.45 15.9 14 16.9 14 18v20c0 2.21 1.79 4 4 4h18c1.66 0 3.08-1.01 3.68-2.44l6.03-14.1A4 4 0 0046 24v-3.83l-.02-.02L46 20z"/></svg>',width:"80%",confirmButtonText:Z}),localStorage.setItem("WHupdate",J)),m(),t()&&oe(),n()&&(f(),b(),ne(),document.addEventListener("paste",(e=>{if(s(`.${d.EMBED.CLASSNAME.EMBED_FILE}`)&&e.clipboardData.files[0]){const t=s(`.${d.EMBED.CLASSNAME.EMBED_FILE} input`);t.files=e.clipboardData.files;const n=new Event("UIEvent");n.initEvent("change",!1,!0),t.dispatchEvent(n)}}),{passive:!0}),K(),ie()),r()&&($(),(()=>{const e=location.pathname.split("/")[2],t=I("blacklist");(e=>t.includes(e))(e)&&(s(`${d.BADGE.SELECTOR.USER_PROFILE_NICK}:not(:first-child)`).style.filter="grayscale(65%)",s(d.BADGE.SELECTOR.USER_PROFILE_NICK_ELEMENT).insertAdjacentHTML("beforeend",`<span class="${d.BADGE.CLASSNAME.PROFILE_BLACKLISTED}" id="${d.BADGE.ID.PROFILE_BLACKLISTED}">🔐</span>`)),document.addEventListener("click",(t=>{t.target.id===d.BADGE.ID.PROFILE_BLACKLISTED&&k(e)}))})()),o()&&s(V.SELECTOR.LAST_NAV_ELEMENT).insertAdjacentHTML("beforeend",X.settingsNav),a()&&F(),l()&&(P(),ae(),le()),i()&&(s(`${d.HIGHLIGHT_OP.SELECTOR.OP_THREAD} .${d.BADGE.CLASSNAME.NICK_ELEMENT}`).insertAdjacentHTML("afterbegin",ee),s(`.${d.HIGHLIGHT_OP.CLASSNAME.HIGHLIGHT_BUTTON}`).addEventListener("click",(()=>{const e=s(".night")?"rgb(7, 68, 91)":"#ffeac1";E(`.${d.HIGHLIGHT_OP.CLASSNAME.AUTHOR_COMMENTS}`).forEach((t=>{t.style.backgroundColor=e})),s(`.${d.HIGHLIGHT_OP.CLASSNAME.HIGHLIGHT_BUTTON}`).remove()})))}();

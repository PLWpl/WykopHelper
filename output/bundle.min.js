!function(){"use strict";const e=location.href,t=()=>e.indexOf("wykop.pl/link/")>-1||e.indexOf("wykop.pl/mikroblog/")>-1||e.indexOf("wykop.pl/wpis/")>-1||e.indexOf("wykop.pl/moj/")>-1||e.indexOf("wykop.pl/tag/wpisy")>-1,n=()=>!!(e.indexOf("wykop.pl/ustawienia/")>-1),a=()=>!!(e.indexOf("wykop.pl/ustawienia/wykophelper")>-1),o="trolls",r="uniqueNicks",i="whsettings",l={BADGE:{NICK_ELEMENTS:"li div.author",NICK_ELEMENT:"author",NICK:".showProfileSummary > b",BADGE:"badge",MARK_BUTTON:"buttonWH",MARK_BUTTON_CLICKED:"buttonWH--clicked",REPLY_FORM:".replyForm textarea",COMMENT_FORM:"#commentFormContainer textarea",DATASET:{USERNAME:e=>"[data-whusername='"+e},MODAL_BUTTON_REMOVE:"modalWH-button--remove"},SETTINGS:{LAST_NAV_ELEMENT:"#site .nav > ul > li:last-child",ACTIVE_NAV_ELEMENT:"#site .nav > ul .active",SETTINGS_FORM_ELEMENT:"#site .grid-main .settings",WH_NAV_SETTINGS_LINK:"whSettingsLink",WH_USER_TABLE:"tableWH",WH_USER_TABLE_CONTAINER:"tableWH__container",WH_USER_TABLE_BODY:"tableWH__body"}},s=(e,t="debil")=>`<span class="badge badge--${t.toLowerCase()}" data-whusername="${e}">${t.toLowerCase().capitalize()}</span>`,c=e=>{const t=`<style> ${e} </style>`;document.body.insertAdjacentHTML("afterbegin",t)},{BADGE:d}=l,u=()=>{let e,t=[];const n=e=>!!t.includes(e),a=(a,i)=>{n(a)||((e=>{t.push(e),localStorage.setItem(r,JSON.stringify(t))})(a),((t,n)=>{e.push({nick:t,link:n}),localStorage.setItem(o,JSON.stringify(e))})(a,i))},i=()=>document.querySelectorAll(d.NICK_ELEMENTS),l=e=>e.querySelector(d.NICK).innerText,u=()=>location.reload(),m=e=>!e.querySelector("."+d.BADGE),p=()=>{const e=document.querySelector(d.REPLY_FORM),t=document.querySelector(d.COMMENT_FORM);return!(e&&""!==e.value||t&&""!==t.value)},g=()=>{e=localStorage.getItem(o)?JSON.parse(localStorage.getItem(o)):[],t=localStorage.getItem(r)?JSON.parse(localStorage.getItem(r)):[]},k=(e="Debil")=>{try{i().forEach(t=>{const a=l(t);n(a)&&m(t)?t.insertAdjacentHTML("afterbegin",s(a,e)):(e=>!!e.querySelector("."+d.MARK_BUTTON))(t)||t.insertAdjacentHTML("beforeend",'<span class="buttonWH">Oznacz</span>')})}catch(e){}},b=e=>{g();const t=l(e.target.closest("."+d.NICK_ELEMENT)),o=e.target.closest("."+d.NICK_ELEMENT).querySelector("a + a").href;e.target.classList.add(d.MARK_BUTTON_CLICKED),e.target.innerText="✔",setTimeout(()=>{e.target.remove()},700),a(t,o),(()=>{try{i().forEach(e=>{const t=l(e);n(t)&&m(e)&&e.insertAdjacentHTML("afterbegin",s(t)),n(t)&&m(e)&&e.querySelector("."+d.MARK_BUTTON)&&!e.querySelector("."+d.MARK_BUTTON_CLICKED)&&e.querySelector("."+d.MARK_BUTTON).remove()})}catch(e){}})()},y=n=>{g();for(let[t,a]of e.entries())a.nick===n&&(delete e[t],e=e.filter(e=>null!=e),localStorage.setItem(o,JSON.stringify(e)));t=t.filter(e=>e!==n),localStorage.setItem(r,JSON.stringify(t)),p?u():Swal.fire({title:"Hej!",text:"Wygl&#x0105;da na to, &#x017c;e jeste&#x015b; w trakcie pisania komentarza. Kliknij &quot;Anuluj&quot;, &#x017c;eby doko&#x0144;czy&#x0107; pisanie i r&#x0119;cznie od&#x015b;wie&#x017c;y&#x0107; stron&#x0119; p&oacute;&#x017a;niej (to konieczne by znikn&#x0119;&#x0142;a odznaka przy nicku u&#x017c;ytkownika). Je&#x015b;li to pomy&#x0142;ka, i nie masz nic przeciw od&#x015b;wie&#x017c;eniu strony, naci&#x015b;nij &quot;OK&quot;.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Od&#x015b;wie&#x017c;",cancelButtonText:"Anuluj"}).then(e=>{e.value&&u()})},_=t=>{const n=(t=>{g();for(let n=0;n<e.length;n++){if(e[n].nick===t)return{link:e[n].link,nick:e[n].nick};void 0!==e[n]&&e[n]}})(document.querySelector(t).dataset.whusername);((e,t)=>{tippy(e,{content:t,allowHTML:!0,interactive:!0,placement:"bottom-start",followCursor:"initial"})})(t,((e,t)=>`\n  <p class="modalWH-text">Powód  oznaczenia: \n    <a href="${e}" target="_blank">link</a>\n  </p>\n  <span class="modalWH-button modalWH-button--remove" data-whuserremove="${t}">Usuń oznaczenie</span>\n`)(n.link,n.nick))};c("\n.buttonWH {\n  display: inline-block;\n  padding: .2rem .2rem;\n  border: 1px solid #9999996e;\n  cursor: pointer;\n  margin-left: .5rem;\n  color: #808080ba;\n  border-radius: .3rem;\n  font-size: .7rem;\n  line-height: .7rem;\n  transition: .3s all;\n}\n.buttonWH:hover {\n  border-color: green;\n}\n.buttonWH--clicked {\n  border-color: green;\n  opacity: 0;\n}\n.badge {\n  color: red;\n  font-weight: bold;\n  margin-right: .3rem;\n  border: 1px solid currentColor;\n  padding: .1rem .2rem;\n}\n.modalWH-button {\n  display: block;\n  padding: .4rem .8rem;\n  border: 1px solid #9999996e;\n  cursor: pointer;\n  color: #808080ba;\n  border-radius: .3rem;\n  font-size: 1rem;\n  line-height: 1rem;\n  transition: .3s all;\n}\n.author .modalWH-text {\n  position: relative;\n  margin-bottom: .5rem;\n  top: unset;\n  right: unset;\n  left: unset;\n  bottom: unset;\n}\n.tippy-box {\n  width: 20rem;\n}\n.tippy-content {\n  display: flex;\n  flex-direction: column;\n}\n"),g(),k(),document.querySelector("."+d.BADGE)&&document.querySelectorAll("."+d.BADGE).forEach(e=>{const t=e.dataset.whusername;setTimeout(_(d.DATASET.USERNAME(t)),1150)}),document.getElementById("itemsStream").addEventListener("click",e=>{const t=e.target;if(t.classList.contains(d.MARK_BUTTON)&&b(e),t.classList.contains("affect")&&t.closest(".more")&&setTimeout(()=>{g(),k()},500),t.classList.contains(d.MODAL_BUTTON_REMOVE)){console.log(t);const e=t.dataset.whuserremove;y(e)}})},{SETTINGS:m}=l,p=()=>{let e,t,n;const a={BADGE:{HIDE_MARKED_USERS:!1,DEFAULT_NAME:"Debil",DEFAULT_COLOR:"red"},GENERAL:{WARN_ON_RELOAD:!1}},l=document.querySelector(m.SETTINGS_FORM_ELEMENT),s=(...l)=>{[...l].length<1||[...l].includes("settings")?e=localStorage.getItem(i)?JSON.parse(localStorage.getItem(i)):a:[...l].includes("markedUsers")&&(t=localStorage.getItem(o)?JSON.parse(localStorage.getItem(o)):[],n=localStorage.getItem(r)?JSON.parse(localStorage.getItem(r)):[])},d=()=>{document.querySelector(m.ACTIVE_NAV_ELEMENT).classList.remove("active"),document.querySelector("."+m.WH_NAV_SETTINGS_LINK).classList.add("active"),l.innerHTML="",l.innerHTML='\n  <fieldset>\n    <h4>WykopHelper - Ustawienia</h4>\n    <div class="space">\n      <div class="row">\n        <input\n          class="checkbox"\n          type="checkbox"\n          name="wh[hide_marked_user]"\n          id="hideMarkedUser"\n          disabled\n        />\n        <label class="settings__crossed inline" for="XhideMarkedUser"\n          >Ukrywaj treści oznakowanych użytkowników (tak jak na czarnej liście)</label\n        >\n      </div>\n      <div class="row">\n        <input\n          class="checkbox"\n          type="checkbox"\n          name="wh[warn_on_reload]"\n          id="warnOnReload"\n          disabled\n        />\n        <label class="settings__crossed inline" for="XwarnOnReload">Ostrzegaj przy próbie zamknięcia/przeładowania strony gdy wykryto pisanie komentarza</label>\n      </div>\n      <div class="row">\n        <input\n          class="checkbox"\n          type="checkbox"\n          name="wh[remove_all_marked]"\n          id="removeAllMarked"\n          disabled\n        />\n        <label class="settings__crossed inline" for="XremoveAllMarked">Usuń wszystkich oznaczonych użytkowników [AKCJA NIEODWRACALNA]</label>\n      </div>\n      <div class="row">\n        <input\n          class="checkbox"\n          type="checkbox"\n          name="wh[show_marked_user_table]"\n          id="showMarkedUserTable"\n        />\n        <label class="inline" for="showMarkedUserTable">Pokaż tabelę z oznaczonymi użytkownikami</label>\n      </div>\n    </div>\n  </fieldset>\n',l.removeAttribute("method"),l.removeAttribute("action"),l.insertAdjacentHTML("afterend",'\n<div class="tableWH__container tableWH__container--hidden">\n  <h4 class="tableWH__heading">WykopHelper - Lista oznaczonych użytkowników</h4>\n  <table class="tableWH">\n    <thead class="tableWH__head">\n      <tr>\n        <td>no.</td>\n        <td>Nick</td>\n        <td>Typ</td>\n        <td>Link</td>\n      </tr>\n    </thead>\n    <tbody class="tableWH__body">\n    </tbody>\n  </table> \n</div>\n'),(()=>{s("markedUsers");const e=document.querySelector("."+m.WH_USER_TABLE_BODY);for(let i=0;i<t.length;i++){const l=t[i];e.insertAdjacentHTML("beforeend",(n=i+1,a=l.nick,o=l.type||"Debil",r=l.link,`\n    <tr>\n      <td>${n}</td>\n      <td><a href="https://www.wykop.pl/ludzie/${a}" target="_blank">${a}</a></td>\n      <td>${o}</td>\n      <td><a href="${r}" target="_blank">&#128279</a></td>\n    </tr>\n    `))}var n,a,o,r})()},u=t=>{"input"!==t.target.nodeName&&"label"!==t.target.nodeName||"showMarkedUserTable"===t.target.id&&"showMarkedUserTable"===t.target.getAttribute("for")||(e[t.target.id||t.target.getAttribute("for")]=!e[t.target.id||t.target.getAttribute("for")],console.log(e)),"showMarkedUserTable"===t.target.id&&"showMarkedUserTable"===t.target.getAttribute("for")||document.querySelector("."+m.WH_USER_TABLE_CONTAINER).classList.toggle(`.${m.WH_USER_TABLE_CONTAINER}--hidden`)};c("\n.tableWH__container {\n  padding: 1rem;\n}\n.tableWH__container--hidden {\n  display: none;\n}\n.tableWH__head {\n  font-weight: bold;\n  border-bottom: 2px solid currentColor;\n}\n.settings__crossed {\n  opacity: .4;\n  text-decoration: line-through;\n  cursor: not-allowed;\n}"),d(),s(),l.addEventListener("change",u(event))};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},localStorage.getItem("WHupdate")&&localStorage.getItem("WHupdate")<.22?(Swal.fire({title:"WykopHelper zaktualizowany!",html:'Dodatek WykopHelper został właśnie zaktualizowany. Wprowadzone zmiany to: <br><ul style="margin-top:1rem; list-style-type:square"><li style="text-align:left;margin-left:2rem">w ustawieniach (wykopu) pojawi&#x142;a si&#x119; zak&#x142;adka &#x22;WykopHelper&#x22; - tam docelowo znajd&#x105; si&#x119; wszystkie opcje konfiguracyjne dodatku. Aktualnie funkcjonuje jedynie podgl&#x105;d listy wszystkich oznaczonych u&#x17C;ytkownik&#xF3;w.</li></ul>',icon:"info",confirmButtonText:"Okej!"}),localStorage.setItem("WHupdate",.22)):localStorage.getItem("WHupdate")||(Swal.fire({title:"WykopHelper zainstalowany!",html:'Mi&#x0142;ego u&#x017c;ytkowania dodatku! Je&#x015b;li masz jakiekolwiek problemy, pytania lub sugestie, zg&#x0142;o&#x015b; je <a href="https://github.com/PLWpl/wykopoweTrole/issues" target="_blank">tutaj.</a>',icon:"success",confirmButtonText:"Super!"}),localStorage.setItem("WHupdate",.22)),t()&&u(),n()&&document.querySelector(m.LAST_NAV_ELEMENT).insertAdjacentHTML("beforeend",'<li class="whSettingsLink"><a href="https://www.wykop.pl/ustawienia/wykophelper/"><span><strong>WykopHelper</strong> &#10024;</span></a></li>'),a()&&p()}();
